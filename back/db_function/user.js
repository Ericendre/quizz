const express = require("express");
const bodyParser = require("body-parser");
const router = express.Router();
const sqlite3 = require('sqlite3').verbose();

const db = new sqlite3.Database('./db/quizz');

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////// Users /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// get user info //
function profile(req, res) {
  db.get( "SELECT * FROM users WHERE id = ?", [req.params.id], (err, rows) => {
    res.json(rows);
  });
}

// Add user //
function add(req, res) {
  db.run( "INSERT INTO users (login, password, picture_url, remember) VALUES (?,?,?,NULL)", [req.body.login,req.body.password,req.body.picture_url]);
  res.json('ok!');
}

module.exports = {profile, add};
